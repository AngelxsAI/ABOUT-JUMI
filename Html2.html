<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JUMI - Grupo Juvenil Católico</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;900&display=swap" rel="stylesheet">
  
  <style>
    /* VARIABLES DE COLOR */
    :root {
      --primary: #6a0dad; /* Morado JUMI */
      --accent: #00bcd4; /* Celeste JUMI */
      --secondary: #000;
      --background: #f8f8ff;
      --text-color: #333;
      --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s ease;
    }

    /* ESTILOS GLOBALES Y RESET */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
    }

    body {
      background-color: var(--background);
      color: var(--text-color);
      line-height: 1.6;
      scroll-behavior: smooth;
    }

    a {
      text-decoration: none;
      color: var(--primary);
    }

    /* HEADER */
    header {
      background: linear-gradient(90deg, var(--primary), var(--accent));
      color: white;
      padding: 15px 20px;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
      text-align: center;
    }
    .logo {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .cruz-icon {
      width: 35px;
      height: 35px;
      margin-bottom: 5px;
    }
    header h1 {
      font-size: 1.8rem;
      font-weight: 900;
      letter-spacing: 1px;
    }
    .header-subtitle {
      font-size: 0.8rem;
      opacity: 0.9;
      margin-top: 3px;
    }

    /* NAVEGACIÓN */
    .main-nav {
      position: sticky;
      top: 0;
      z-index: 1000;
      background-color: white;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }
    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 15px;
    }
    .nav-links {
      list-style: none;
      display: flex;
      justify-content: center;
      padding: 10px 0;
      flex-wrap: wrap;
    }
    .nav-links li a {
      color: var(--primary);
      padding: 8px 15px;
      display: block;
      font-weight: 600;
      border-radius: 20px;
      transition: var(--transition);
      font-size: 0.9em;
    }
    .nav-links li a:hover {
      background-color: var(--accent);
      color: white;
    }
    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      color: var(--primary);
      font-size: 1.5rem;
      padding: 10px 15px;
      cursor: pointer;
    }

    /* VERSÍCULO DEL DÍA */
    #versiculo-del-dia {
      background: linear-gradient(135deg, var(--accent), #7deaf9);
      color: white;
      padding: 20px 15px;
      text-align: center;
      box-shadow: var(--shadow);
      margin: 20px 0;
    }
    .contenido-verso {
      max-width: 800px;
      margin: 0 auto;
    }
    .texto-verso {
      font-style: italic;
      font-size: 1.15rem;
      margin-bottom: 10px;
    }
    .referencia-verso {
      font-weight: 700;
      font-size: 0.9rem;
      opacity: 0.9;
    }
    .botones-compartir {
      margin-top: 15px;
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    .btn-compartir {
      background-color: var(--primary);
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 600;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }
    .btn-compartir:hover {
      background-color: #510a8d;
    }

    /* SECCIONES GENERALES */
    main {
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .section {
      background-color: white;
      padding: 30px;
      margin-bottom: 30px;
      border-radius: 12px;
      box-shadow: var(--shadow);
      opacity: 0; /* Inicialmente oculto para la animación */
      transform: translateY(20px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    .section.visible {
      opacity: 1;
      transform: translateY(0);
    }
    .section h2 {
      color: var(--primary);
      margin-bottom: 20px;
      border-bottom: 2px solid var(--accent);
      padding-bottom: 10px;
      font-size: 1.6rem;
    }

    /* BOTONES GRUPO */
    .btn-group {
      margin-top: 20px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }
    .btn {
      padding: 10px 20px;
      border-radius: 50px;
      font-weight: 700;
      text-transform: uppercase;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .btn-primary {
      background-color: var(--primary);
      color: white;
      border: 2px solid var(--primary);
    }
    .btn-primary:hover {
      background-color: var(--accent);
      border-color: var(--accent);
    }
    .btn-secondary {
      background-color: transparent;
      color: var(--primary);
      border: 2px solid var(--primary);
    }
    .btn-secondary:hover {
      background-color: var(--primary);
      color: white;
    }

    /* SECCIÓN COMPARTIR NOTICIA */
    #compartir-noticia {
        text-align: center;
        background-color: #e3f2fd; /* Fondo azul claro */
    }
    #noticia-texto {
        resize: vertical;
        border: 2px solid var(--accent);
        transition: border-color 0.3s;
    }
    #noticia-texto:focus {
        border-color: var(--primary);
    }
    #btnCompartirNoticia {
        background: linear-gradient(90deg, var(--accent), var(--primary));
        border: none;
    }
    #btnCompartirNoticia:hover {
        background: linear-gradient(90deg, var(--primary), var(--accent));
        transform: translateY(-2px);
    }

    /* LISTA DE MIEMBROS */
    .members-list {
      list-style: none;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 10px;
      margin-top: 15px;
      padding: 0;
      text-align: center;
    }
    .members-list li {
      background-color: #f8f8f8;
      padding: 8px;
      border-radius: 5px;
      font-weight: 600;
      color: var(--primary);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    /* GALERÍA */
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    .image-container {
      overflow: hidden;
      border-radius: 8px;
      box-shadow: var(--shadow);
    }
    .image-container img {
      width: 100%;
      height: auto;
      display: block;
      transition: transform 0.3s;
    }
    .image-container img:hover {
      transform: scale(1.05);
    }

    /* IFRAMES Y MAPAS */
    iframe {
      width: 100%;
      height: 100%;
      border: 0;
      border-radius: 8px;
    }
    .calendar-container, #ubicacion > div:nth-of-type(1) {
      height: 400px;
      margin-top: 20px;
    }

    /* FOOTER */
    footer {
      background-color: var(--primary);
      color: white;
      padding: 20px;
      text-align: center;
      border-top: 5px solid var(--accent);
    }
    .social-links {
      margin-bottom: 15px;
    }
    .social-links a {
      color: white;
      font-size: 1.5rem;
      margin: 0 10px;
      transition: var(--transition);
    }
    .social-links a:hover {
      color: var(--accent);
      transform: scale(1.1);
    }
    .copyright {
      font-size: 0.8rem;
      margin: 5px 0;
    }

    /* MEDIA QUERIES */
    @media (max-width: 800px) {
        .nav-links {
            display: none;
            flex-direction: column;
            width: 100%;
            padding: 0;
            text-align: center;
        }
        .nav-links.active {
            display: flex;
        }
        .nav-links li {
            width: 100%;
            border-bottom: 1px solid #eee;
        }
        .nav-links li:last-child {
            border-bottom: none;
        }
        .mobile-menu-btn {
            display: block;
            width: 100%;
            text-align: left;
        }
        .btn-group {
            justify-content: space-around;
        }
        .btn {
            width: 48%;
            text-align: center;
            justify-content: center;
        }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <div class="logo">
        <img src="CRUZ.png" alt="Cruz" class="cruz-icon">
        <h1>JUMI</h1>
        <p class="header-subtitle">Grupo Juvenil Católico - Encuentra paz, amor y unidad en Cristo</p>
      </div>
    </div>
  </header>

  <nav class="main-nav">
    <div class="nav-container">
      <button class="mobile-menu-btn" id="mobileMenuBtn">
        <i class="fas fa-bars"></i> Menú
      </button>
      <ul class="nav-links" id="navLinks">
        <li><a href="#inicio"><i class="fas fa-home"></i> Inicio</a></li>
        <li><a href="#nosotros"><i class="fas fa-users"></i> Sobre Nosotros</a></li>
        <li><a href="#informacion"><i class="fas fa-info-circle"></i> Info</a></li>
        <li><a href="#miembros"><i class="fas fa-user-friends"></i> Miembros</a></li>
        <li><a href="#album"><i class="fas fa-images"></i> Álbum</a></li>
        <li><a href="#eventos"><i class="fas fa-calendar-alt"></i> Eventos</a></li>
        <li><a href="#ubicacion"><i class="fas fa-map-marker-alt"></i> Ubicación</a></li>
      </ul>
    </div>
  </nav>

  <div id="versiculo-del-dia"></div>

  <main>
    <section id="compartir-noticia" class="section">
      <h2><i class="fas fa-bullhorn"></i> Comparte una Noticia del Grupo</h2>
      <p>Envía un mensaje a tus contactos con una foto, un versículo de reflexión y el enlace de JUMI.</p>
      
      <div class="input-group" style="max-width: 600px; margin: 20px auto; padding: 20px; border: 1px solid #ddd; border-radius: 8px;">
        <textarea id="noticia-texto" placeholder="Escribe tu mensaje para la comunidad (ej. ¡Tuvimos un gran retiro!)..." style="width: 100%; min-height: 100px; padding: 10px; border-radius: 5px; margin-bottom: 10px;"></textarea>
        <button id="btnCompartirNoticia" class="btn btn-primary" style="width: 100%;"><i class="fas fa-share-alt"></i> Compartir Noticia, Foto y Versículo</button>
        <p style="font-size: 0.8em; margin-top: 10px; color: gray;">*Se adjuntará la imagen 'jumi-caravana.jpg', el enlace, y un versículo de refuerzo.</p>
      </div>
    </section>
    <section id="inicio" class="section">
      <h2><i class="fas fa-cross"></i> Bienvenidos a JUMI</h2>
      <p>JUMI es un espacio creado para jóvenes que buscan crecer en su fe católica, compartir experiencias y formar una comunidad basada en los valores cristianos. Aquí encontrarás un ambiente de amor, respeto y fraternidad donde podrás desarrollar tu espiritualidad.</p>
      <p>Nuestro objetivo es fortalecer la relación con Dios a través de la oración, el estudio de la Biblia y el servicio comunitario. Te invitamos a unirte a nuestras actividades y ser parte de esta maravillosa familia espiritual.</p>

      <div class="btn-group">
        <a href="https://whatsapp.com/channel/0029Vb5M9qLAu3aRABUHvq3q" class="btn btn-primary" target="_blank">
          <i class="fab fa-whatsapp"></i> Unirse al Canal
        </a>
      </div>
    </section>

    <section id="nosotros" class="section">
      <h2><i class="fas fa-church"></i> Sobre Nosotros</h2>
      <p>JUMI (Juventud Misionera) es un grupo católico juvenil dedicado a la formación espiritual de sus miembros. Nuestro nombre refleja nuestra devoción a la Virgen María y nuestro compromiso con la unidad en Cristo.</p>
      <p>Fundado en 2007 nuestro grupo ha crecido gracias al trabajo comprometido de jóvenes que comparten el deseo de profundizar en su fe y servir a la comunidad. Organizamos retiros espirituales, charlas formativas, actividades recreativas y proyectos de servicio social.</p>
      <p>Nuestro lema es "Juventud Misionera, Mas Alla De Las Fronteras", y bajo esta premisa buscamos crear un espacio inclusivo donde todos los jóvenes, sin importar su nivel de conocimiento religioso, puedan sentirse acogidos y acompañados en su camino de fe.</p>
    </section>

    <section id="informacion" class="section">
      <h2><i class="fas fa-info-circle"></i> Información</h2>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-top: 1.5rem;">
        <div style="background-color: #f8f9fa; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
          <h3 style="color: var(--primary); margin-bottom: 0.5rem;"><i class="fas fa-clock"></i> Horario</h3>
          <p>Reuniones semanales: Domingo de 3:00 PM a 5:00 PM</p>
          <p>Misas especiales: Domingos 10:00 AM</p>
        </div>

        <div style="background-color: #f8f9fa; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
          <h3 style="color: var(--primary); margin-bottom: 0.5rem;"><i class="fas fa-user-plus"></i> Requisitos</h3>
          <p>Edad mínima: 14 años</p>
          <p>Deseo de crecer espiritualmente</p>
          <p>Compromiso con los valores catolicos </p>
        </div>

        <div style="background-color: #f8f9fa; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
          <h3 style="color: var(--primary); margin-bottom: 0.5rem;"><i class="fas fa-calendar-check"></i> Actividades</h3>
          <p>Oración comunitaria | Estudio bíblico | Servicio comunitario</p>
          <p>Retiros espirituales | Visitas a enfermos</p>
        </div>
      </div>
    </section>

    <section id="miembros" class="section">
      <h2><i class="fas fa-users"></i> Nuestros Miembros</h2>
      <p>Conoce a los jóvenes que forman parte de nuestra comunidad JUMI. Juntos trabajamos para crecer en fe y servir a los demás.</p>

      <ul class="members-list">
        <li>Steven</li>
        <li>Daniel</li>
        <li>Oscar</li>
        <li>Kenia</li>
        <li>Valentin</li>
        <li>Rudy</li>
        <li>Angel</li>
        <li>Kevin</li>
        <li>Natalia</li>
        <li>Jaime</li>
        <li>Marvin</li>
        <li>Gissela</li>
        <li>Michael</li>
        <li>Franklin</li>
        <li>Mauricio</li>
        <li>Katty</li>
        <li>Jasmin</li>
        <li>Nicol</li>
        <li>Se Parte De Nosotros</li>
      </ul>

      <p style="margin-top: 1.5rem; font-style: italic;">"Porque donde dos o tres se reúnen en mi nombre, allí estoy yo en medio de ellos." - Mateo 18:20</p>
    </section>


    <section id="eventos" class="section">
      <h2><i class="fas fa-calendar-alt"></i> Próximos Eventos</h2>
      <p>Mantente informado sobre nuestras próximas actividades. ¡Te esperamos con alegría!</p>

      <ul id="lista-eventos" style="margin-top: 1.5rem; list-style: none;"></ul>

      <div class="calendar-container">
        <iframe 
          src="https://calendar.google.com/calendar/embed?src=8bf36b5b88e056fd52aee2ee97d1503b2d1fda335e319581bfd7ffecfca1b426%40group.calendar.google.com&ctz=America%2FEl_Salvador"
          title="Calendario de Eventos JUMI"
          frameborder="0" 
          scrolling="no">
        </iframe>
      </div>
    </section>

    <section id="ubicacion" class="section">
      <h2><i class="fas fa-map-marked-alt"></i> Ubicación</h2>
      <p>Nuestras reuniones se llevan a cabo en la Iglesia Católica de la Colonia San Francisco Guajoyo. ¡Ven y únete a nosotros!</p>

      <div class="map-container">
        <iframe 
          src="https://maps.google.com/maps?q=Iglesia%20Católica%20Colonia%20San%20Francisco%20Guajoyo&t=&z=15&ie=UTF8&iwloc=&output=embed" 
          title="Ubicación de JUMI"
          allowfullscreen="" 
          loading="lazy">
        </iframe>
      </div>

      <div class="btn-group" style="margin-top: 1.5rem;">
        <a href="https://maps.app.goo.gl/TU_ENLACE_A_DIRECCIONES_AQUÍ" class="btn btn-primary" target="_blank">
          <i class="fas fa-directions"></i> Cómo llegar
        </a>
      </div>
    </section>

    <section class="download-section section">
      <h2><i class="fas fa-bible"></i> Recursos Espirituales</h2>

      <div class="download-card">
        <h3>Santa Biblia - Versión Reina Valera</h3>
        <button onclick="window.open('https://www.bible.com/es/versions/149-rvr1960-biblia-reina-valera-1960', '_blank')" class="btn btn-primary" style="margin-top: 10px; display: inline-flex;">
          <i class="fas fa-book"></i> Leer Santa Biblia
        </button>
      </div>

      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-top: 2rem;">
        <div style="background-color: #f8f9fa; padding: 1.5rem; border-radius: 8px;">
          <h3 style="margin-bottom: 0.5rem; color: var(--accent);"><i class="fas fa-mobile-alt"></i> App Santa Biblia</h3>
          <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 15px;">
            <a href="https://apps.apple.com/us/app/bible/id282935706" target="_blank" class="btn" style="background-color: #000; color: white;">
              <i class="fab fa-apple"></i> App Store
            </a>
            <a href="https://play.google.com/store/apps/details?id=com.sirma.mobile.bible.android" target="_blank" class="btn" style="background-color: #488aec; color: white;">
              <i class="fab fa-google-play"></i> Play Store
            </a>
          </div>
        </div>

        <div style="background-color: #f8f9fa; padding: 1.5rem; border-radius: 8px;">
          <h3 style="margin-bottom: 0.5rem; color: var(--accent);"><i class="fas fa-book-open"></i> Catecismo</h3>
          <button onclick="window.open('https://www.vatican.va/archive/catechism_sp/index_sp.html', '_blank')" class="btn btn-primary" style="margin-top: 15px; width: 100%;">
            <i class="fas fa-download"></i> Leer
          </button>
        </div>
      </div>
    </section>

    <section class="section" style="text-align: center;">
      <h2><i class="fas fa-praying-hands"></i> Oración Comunitaria</h2>
      <p style="max-width: 800px; margin: 0 auto 1.5rem;">"La oración es el oxígeno del alma" - San Pío de Pietrelcina</p>

      <div id="oracion-box" style="background-color: #f0f0f0; padding: 2rem; border-radius: 8px; margin-top: 1.5rem; box-shadow: var(--shadow);">
        <h3 style="color: var(--primary); margin-bottom: 1rem;">Oración por las necesidades del grupo</h3>
        <p id="oracion-text" style="font-style: italic; margin-bottom: 1rem;">
          "Señor Jesús, te pedimos por cada miembro de nuestra comunidad JUMI. Bendice nuestros esfuerzos por crecer en santidad, fortalece nuestros lazos de amistad y guíanos en el servicio a los demás. Que María, nuestra Madre, nos acompañe siempre en este camino de fe. Amén."
        </p>

        <div style="display: flex; justify-content: center; gap: 1rem; margin-top: 1.5rem;">
          <button onclick="compartirOracion()" class="btn btn-primary" style="padding: 0.6rem 1.2rem;">
            <i class="fas fa-share-alt"></i> Compartir
          </button>
          <button onclick="guardarOracion()" class="btn" style="background-color: #ccc; color: var(--text-color); padding: 0.6rem 1.2rem;">
            <i class="fas fa-bookmark"></i> Guardar
          </button>
        </div>
      </div>
    </section>

    <section class="section" style="text-align: center;">
      <h2><i class="fas fa-hands-helping"></i> Únete a Nuestra Comunidad</h2>
      <p>Sigue nuestras redes sociales y mantente conectado con JUMI</p>

      <div class="btn-group">
        <a href="https://www.instagram.com/angelxszgigi/" class="btn btn-secondary" target="_blank">
          <i class="fab fa-instagram"></i> Instagram Personal
        </a>
        <a href="https://www.instagram.com/jumi_medalla.milagrosa?igsh=MXVsdmV0ZTR2bW40ZA==" class="btn btn-secondary" target="_blank">
          <i class="fab fa-instagram"></i> Instagram JUMI
        </a>
        <a href="https://whatsapp.com/channel/0029Vb5M9qLAu3aRABUHvq3q" class="btn btn-primary" target="_blank">
          <i class="fab fa-whatsapp"></i> Canal WhatsApp
        </a>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-content">
      <div class="social-links">
        <a href="https://www.instagram.com/jumi_medalla.milagrosa?igsh=MXVsdmV0ZTR2bW40ZA==" target="_blank" aria-label="Instagram JUMI"><i class="fab fa-instagram"></i></a>
        <a href="https://whatsapp.com/channel/0029Vb5M9qLAu3aRABUHvq3q" target="_blank" aria-label="Canal WhatsApp"><i class="fab fa-whatsapp"></i></a>
        <a href="mailto:orgjumi@gmail.com" target="_blank" aria-label="Correo electrónico"><i class="fas fa-envelope"></i></a>
      </div>
      <p class="copyright">© 2025 JUMI - Juventud Misionera</p>
      <p class="copyright">Desarrollado con amor por Angel para la comunidad JUMI</p>
    </div>
  </footer>

  <script>
    // URL y constantes actualizadas
    const URL_JUMI = "https://about-jumi-b95z.vercel.app/";
    const NOMBRE_IMAGEN_COMPARTIR = "jumi-caravana.jpg"; // Renombrado de 1000030126.jpg

    // Gestor del versículo diario
    const gestorVersiculo = {
        versiculos: [
          {
            texto: "A toda perfección le he visto límite, pero tus mandamientos son ilimitados.",
            referencia: "Salmos 119:96"
          },
          {
            texto: "Pedid, y se os dará; buscad, y hallaréis; llamad, y se os abrirá.",
            referencia: "Mateo 7:7"
          },
          {
            texto: "El Señor es mi pastor, nada me faltará.",
            referencia: "Salmos 23:1"
          },
          {
            texto: "Todo lo puedo en Cristo que me fortalece.",
            referencia: "Filipenses 4:13"
          },
          {
            texto: "Porque donde dos o tres se reúnen en mi nombre, allí estoy yo en medio de ellos.",
            referencia: "Mateo 18:20"
          }
        ],
        versiculoAdicionalCompartir: {
            texto: "Amarás a tu prójimo como a ti mismo.",
            referencia: "Marcos 12:31"
        },

        iniciar() {
          this.configurarEventos();
          this.cargarVersiculo();
          setInterval(() => this.cargarVersiculo(), 86400000); 
        },

        configurarEventos() {
          // Menú móvil
          document.getElementById('mobileMenuBtn').addEventListener('click', () => {
            document.getElementById('navLinks').classList.toggle('active');
          });

          // Scroll suave
          document.querySelectorAll('nav a').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
              e.preventDefault();
              document.getElementById('navLinks').classList.remove('active'); // Ocultar menú en móvil
              const target = document.querySelector(this.getAttribute('href'));
              if (target) {
                 window.scrollTo({
                  top: target.offsetTop - 100,
                  behavior: 'smooth'
                });
              }
            });
          });
          
          // Evento para la nueva función de compartir noticia
          const btnCompartirNoticia = document.getElementById('btnCompartirNoticia');
          if (btnCompartirNoticia) {
              btnCompartirNoticia.addEventListener('click', compartirNoticia);
          }
        },

        async cargarVersiculo() {
          try {
            // Intenta obtener el versículo de la API (en español, RVR1960)
            const respuesta = await fetch('https://beta.ourmanna.com/api/v1/get/?format=json&version=RVR1960');
            if (!respuesta.ok) throw new Error('Error al obtener el versículo de la API');
            const data = await respuesta.json();
            
            // Filtro para asegurar que el versículo no esté en inglés (a veces la API falla)
            const texto = data.verse.details.text;
            if (texto && !/you|your|the|is|of|and|but/i.test(texto)) {
                this.mostrarVersiculo(data.verse.details.text, data.verse.details.reference);
            } else {
                throw new Error('Versículo de la API no es válido o está en inglés');
            }
          } catch (error) {
            this.usarVersiculoLocal();
          }
        },

        usarVersiculoLocal() {
          const hoy = new Date();
          const indice = hoy.getDate() % this.versiculos.length; 
          this.mostrarVersiculo(
            this.versiculos[indice].texto,
            this.versiculos[indice].referencia
          );
        },

        mostrarVersiculo(texto, referencia) {
          const contenedor = document.getElementById('versiculo-del-dia');
          if (!contenedor) return; 

          contenedor.innerHTML = `
            <div class="contenido-verso">
              <p class="texto-verso">"${texto}"</p>
              <p class="referencia-verso">${referencia}</p>
              <div class="botones-compartir">
                <button class="btn-compartir" onclick="compartirVersiculo()">
                  <i class="fas fa-share"></i> Compartir
                </button>
                <a href="https://wa.me/?text=${encodeURIComponent(`Versículo del Día JUMI: "${texto}" - ${referencia} \nConoce más en: ${URL_JUMI}`)}" 
                   class="btn-compartir" 
                   target="_blank">
                  <i class="fab fa-whatsapp"></i> WhatsApp
                </a>
              </div>
            </div>
          `;
        }
    };

    // Función para compartir el Versículo del Día (usa navigator.share y fallback a WhatsApp)
    function compartirVersiculo() {
        const texto = document.querySelector('.texto-verso').textContent;
        const referencia = document.querySelector('.referencia-verso').textContent;
        const textoFinal = `Versículo del Día JUMI: ${texto} - ${referencia}\n\nConoce más en: ${URL_JUMI}`;
        
        if (navigator.share) {
          navigator.share({
            title: 'Versículo del Día - JUMI',
            text: textoFinal
          }).catch(error => console.log('Error al compartir:', error));
        } else {
            // Fallback para navegadores sin navigator.share
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(textoFinal)}`;
            window.open(whatsappUrl, '_blank');
        }
    }

    // FUNCIÓN PRINCIPAL: Compartir Noticia con Imagen y Versículo
    async function compartirNoticia() {
        const textoNoticia = document.getElementById('noticia-texto').value;
        
        if (!textoNoticia.trim()) {
            return alert("Por favor, escribe un mensaje antes de compartir.");
        }

        const { texto, referencia } = gestorVersiculo.versiculoAdicionalCompartir;

        // 1. Construir el texto final
        const textoFinal = 
            `${textoNoticia.trim()}\n\n` + 
            `🙏 Reflexión Adicional:\n"${texto}" - ${referencia}\n\n` +
            `---\n` +
            `Hecho por Angel para JUMI: ${URL_JUMI}`;

        const shareData = {
            title: "📢 Noticia de JUMI",
            text: textoFinal,
            url: URL_JUMI,
            files: []
        };

        try {
            // 2. Cargar y adjuntar la imagen local
            const response = await fetch(NOMBRE_IMAGEN_COMPARTIR);
            if (!response.ok) throw new Error("No se pudo cargar la imagen local.");

            const blob = await response.blob();
            const file = new File([blob], NOMBRE_IMAGEN_COMPARTIR, { type: 'image/jpeg' });
            shareData.files.push(file);
            
            // 3. Compartir con imagen
            if (navigator.canShare && navigator.canShare(shareData)) {
                await navigator.share(shareData);
            } else {
                throw new Error("El navegador no puede compartir archivos.");
            }

        } catch (err) {
            console.warn("Fallo al adjuntar la imagen. Compartiendo solo texto. Razón:", err.message);
            // 4. Fallback a compartir solo texto (con enlace directo a WhatsApp)
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(textoFinal)}`;
            window.open(whatsappUrl, '_blank');
            alert("Tu navegador no soporta compartir la imagen, pero el mensaje se ha abierto en WhatsApp. Puedes adjuntar la imagen manualmente.");
        }
    }
    
    // Función para guardar la oración (se mantiene para la sección de Oración)
    function guardarOracion() {
      const texto = document.getElementById('oracion-text').innerText;
      const blob = new Blob([texto], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);

      const enlace = document.createElement('a');
      enlace.href = url;
      enlace.download = 'oracion_comunitaria_jumi.txt';
      document.body.appendChild(enlace);
      enlace.click();
      document.body.removeChild(enlace);
      URL.revokeObjectURL(url);
    }
    
    // Inicialización al cargar el DOM
    document.addEventListener('DOMContentLoaded', () => {
        gestorVersiculo.iniciar();

        // Animación de secciones
        window.addEventListener('scroll', () => {
          document.querySelectorAll('.section').forEach(seccion => {
            const rect = seccion.getBoundingClientRect();
            if (rect.top < window.innerHeight * 0.85) {
              seccion.classList.add('visible');
            }
          });
        });
        
        // Ejecutar la animación inicial
        document.querySelectorAll('.section').forEach(seccion => {
            const rect = seccion.getBoundingClientRect();
            if (rect.top < window.innerHeight * 0.85) {
              seccion.classList.add('visible');
            }
        });
    });

  </script>
  </body>
</html>
